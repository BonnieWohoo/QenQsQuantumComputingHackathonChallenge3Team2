<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Circle Drawer with D3</title>
    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.12/dist/full.min.css" rel="stylesheet" type="text/css" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        canvas {
            border: 1px solid #ccc;
        }
    </style>
</head>
<body class="bg-gray-100 flex flex-col lg:flex-row items-start justify-center min-h-screen p-3">

    <!-- Left Side: Input and D3 Visualization -->
    <div class="w-full lg:w-1/3 flex flex-col items-start pr-3 space-y-3">
        <!-- Input Form -->
        <div class="mb-4 w-full">
            <label for="circleValue" class="block text-lg font-semibold">Enter a floating value:</label>
            <input type="number" id="circleValue" step="0.01" class="input input-bordered w-full mt-2" placeholder="0.00">
        </div>

        <!-- D3 Visualization -->
        <div id="d3Chart" class="w-full h-32 bg-white rounded-md shadow-md"></div>
    </div>

    <!-- Right Side: Drawing Space -->
    <canvas id="drawingCanvas" width="500" height="300" class="bg-white w-full lg:w-2/3"></canvas>

    <script>
        const input = document.getElementById('circleValue');
        const canvas = document.getElementById('drawingCanvas');
        const ctx = canvas.getContext('2d');
    
        // D3 Line Chart setup
        const svg = d3.select("#d3Chart")
            .append("svg")
            .attr("width", "100%")
            .attr("height", "100%");
    
        const margin = {top: 20, right: 30, bottom: 30, left: 40};
        const width = svg.node().getBoundingClientRect().width - margin.left - margin.right;
        const height = svg.node().getBoundingClientRect().height - margin.top - margin.bottom;
    
        const x = d3.scaleLinear().domain([0, 10]).range([0, width]);
        const y = d3.scaleLinear().domain([0, 1]).range([height, 0]);
    
        const xAxis = d3.axisBottom(x).ticks(5).tickFormat(d => d);
        const yAxis = d3.axisLeft(y).ticks(5);
    
        svg.append("g")
            .attr("transform", `translate(${margin.left},${margin.top + height})`)
            .call(xAxis)
            .append("text")
            .attr("fill", "black")
            .attr("x", width / 2)
            .attr("y", 20)
            .attr("text-anchor", "middle")
            .text("B");
    
        svg.append("g")
            .attr("transform", `translate(${margin.left},${margin.top})`)
            .call(yAxis)
            .append("text")
            .attr("fill", "black")
            .attr("transform", "rotate(-90)")
            .attr("y", 6)
            .attr("dy", "0.71em")
            .attr("text-anchor", "end")
            .text("Triplet Yield");
    
        // Function to draw circles
        function drawCircle(value) {
            // Clear previous circles
            ctx.clearRect(0, 0, canvas.width, canvas.height);
    
            // Draw a circle with the given value
            const radius = parseFloat(value);
            if (!isNaN(radius) && radius > 0) {
                // Randomly decide color
                const color = Math.random() > 0.5 ? 'blue' : 'red';
                ctx.fillStyle = color;
                ctx.beginPath();
                ctx.arc(canvas.width / 2, canvas.height / 2, radius, 0, Math.PI * 2);
                ctx.fill();
                
                // Add a dynamic label (for now, just the radius)
                ctx.fillStyle = 'black';
                ctx.font = '16px Arial';
                ctx.fillText(`Radius: ${radius}`, canvas.width / 2 - 30, canvas.height / 2);
            }
        }
    
        // Event listener for input changes
        input.addEventListener('input', (e) => {
            drawCircle(e.target.value);
            // Here you can also update the D3 line chart with the new value
            // For example, you can update a dataset and redraw the line chart based on the input value
        });
    </script>
    
</body>
</html>
